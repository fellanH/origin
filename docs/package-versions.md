# Package Versions

Quick-reference for all dependencies. Grouped by install phase to match `docs/SOP/scaffold.md`.

**Researched:** 2026-02-23. Update this file when upgrading any pinned dependency.

---

## Toolchain

| Tool      | Minimum          | Notes                                    |
| --------- | ---------------- | ---------------------------------------- |
| Node      | 20.19+ or 22.12+ | Vite 7 requirement — Node 18 is EOL      |
| Rust      | stable (latest)  | `rustup default stable && rustup update` |
| Xcode CLT | current          | `xcode-select --install`                 |

---

## Generated by `npm create tauri@latest`

These are installed by the template. Verify they meet the minimums; do not pin manually.

| Package                | Minimum    | Check                          |
| ---------------------- | ---------- | ------------------------------ |
| `tauri` (Rust)         | **2.10.2** | `cargo tree \| grep "^tauri "` |
| `@tauri-apps/api`      | 2.x        | `npm list @tauri-apps/api`     |
| `react`                | 19.x       | `npm list react`               |
| `react-dom`            | 19.x       | `npm list react-dom`           |
| `vite`                 | 7.x        | `npm list vite`                |
| `@vitejs/plugin-react` | latest     | —                              |
| `typescript`           | 5.x        | `npm list typescript`          |

If the template generates Tauri < 2.10.2, upgrade before proceeding:

```bash
npm run tauri upgrade
```

---

## Phase 3 — Tailwind v4

```bash
npm install -D @tailwindcss/vite
```

| Package             | Version       | Notes                                                                |
| ------------------- | ------------- | -------------------------------------------------------------------- |
| `@tailwindcss/vite` | latest (v4.x) | No `tailwind.config.ts` in v4. Remove any generated v3 config files. |

---

## Phase 4 — shadcn/ui + resizable

```bash
npx shadcn@latest init
npx shadcn@latest add resizable
```

shadcn installs `react-resizable-panels` as a dependency. **Verify it is v4:**

```bash
npm list react-resizable-panels
```

| Package                  | Pinned     | Notes                                                                                                                                                       |
| ------------------------ | ---------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `react-resizable-panels` | **4.6.5+** | v4 is required. If shadcn installs v3, run `npm install react-resizable-panels@latest`. Patch `resizable.tsx` immediately after — see scaffold SOP Phase 4. |

---

## Phase 8 — window-state plugin

```bash
npm run tauri add window-state
```

Installs both the npm package and Rust crate automatically.

| Package                           | Version | Notes                                        |
| --------------------------------- | ------- | -------------------------------------------- |
| `@tauri-apps/plugin-window-state` | 2.x     | npm — added to `package.json` by `tauri add` |
| `tauri-plugin-window-state`       | `"2"`   | Cargo — added to `Cargo.toml` by `tauri add` |

---

## Phase 9 — Core packages

```bash
npm install zustand immer
npm install react-error-boundary
```

| Package                | Researched version | Notes                                                                               |
| ---------------------- | ------------------ | ----------------------------------------------------------------------------------- |
| `zustand`              | **5.0.11**         | v5 — named imports only (`import { create }`). `useShallow` from `zustand/shallow`. |
| `immer`                | 10.x               | v9 has ESM issues — use v10+.                                                       |
| `react-error-boundary` | 6.x                | ESM-only package; Vite 7 handles natively.                                          |

---

## Issue #3 — Persistence (`@tauri-store/zustand`)

Added after the PoC passes its checklist — spike first (see `docs/research/risks.md` R1).

```bash
npm install @tauri-store/zustand
npm run tauri add fs
```

Add to `src-tauri/Cargo.toml` manually (not via `tauri add`):

```toml
tauri-plugin-zustand = "1"
```

| Package                 | Pinned version          | Notes                                                             |
| ----------------------- | ----------------------- | ----------------------------------------------------------------- |
| `@tauri-store/zustand`  | **1.2.0**               | Published 2026-02-22. Use `"^1.2.0"` to accept patches.           |
| `@tauri-store/shared`   | installed automatically | Peer of `@tauri-store/zustand` — do not install manually.         |
| `tauri-plugin-zustand`  | `"1"` semver            | Crates.io. Must match the npm package major version.              |
| `@tauri-apps/plugin-fs` | 2.x                     | npm — added by `tauri add fs`. For reading `origin.plugins.json`. |
| `tauri-plugin-fs`       | `"2"`                   | Cargo — added by `tauri add fs`.                                  |

---

## `Cargo.toml` — snapshot by phase

```toml
[dependencies]
tauri = { version = "2", features = [] }
serde = { version = "1", features = ["derive"] }
serde_json = "1"

# Phase 8: window-state (added by `tauri add window-state`)
tauri-plugin-window-state = "2"

# Issue #3: persistence (add manually after PoC)
# tauri-plugin-zustand = "1"
# tauri-plugin-fs = "2"
```

> Do NOT add `features = ["unstable"]` to the `tauri` dependency — it breaks `trafficLightPosition` (issue #14072).

---

## Verification

Run after Phase 9 of the scaffold:

```bash
npm list zustand react-resizable-panels react-error-boundary immer
```

Expected:

```
origin@0.0.1
├── immer@10.x.x
├── react-error-boundary@6.x.x
├── react-resizable-panels@4.x.x
└── zustand@5.x.x
```

---

## Do NOT install

| Package                        | Why                                                                                                                                         |
| ------------------------------ | ------------------------------------------------------------------------------------------------------------------------------------------- |
| `@tauri-apps/vite-plugin`      | Not needed for desktop-only v1. See `docs/research/vite-config.md`.                                                                         |
| `tauri-plugin-global-shortcut` | In-window shortcuts use webview `keydown`. Global shortcut fires when backgrounded and has macOS double-fire bug (#10025). See `CLAUDE.md`. |
| `tailwindcss` (standalone)     | v4 uses `@tailwindcss/vite` — the standalone PostCSS package is v3. Do not install both.                                                    |
| `vite-plugin-dynamic-import`   | Not needed — plugin registry uses static string literals. See `docs/research/vite-config.md`.                                               |
